# ふるさと納税ダッシュボード - プロジェクトロードマップ

## プロジェクト概要
ふるさと納税の控除額シミュレーションと寄付管理を一元化するWebアプリケーション

## 技術スタック
- **フロントエンド**: Next.js 16.0.3 (App Router), React 19.0.0, TypeScript 5.9.3
- **UIライブラリ**: shadcn/ui, lucide-react, Tailwind CSS
- **フォーム**: React Hook Form, Zod
- **バックエンド（予定）**: Next.js API Routes / Server Actions
- **データベース（予定）**: Supabase / Prisma + PostgreSQL
- **認証（予定）**: NextAuth.js / Supabase Auth
- **デプロイ**: Vercel

---

## Phase 1: MVP v0.5 - 基本シミュレーター機能 ✅ **完了**

### 期間
開始: 2025-11-15  
完了: 2025-11-16

### 実装内容
✅ **1-1. プロジェクトセットアップ**
- Next.js 16.0.3 プロジェクト作成
- TypeScript、shadcn/ui、Tailwind CSS設定
- ディレクトリ構造設計

✅ **1-2. 定数・バリデーション準備**
- 都道府県マスターデータ作成
- Zodスキーマ定義（簡易版・詳細版）
- 型定義整備

✅ **1-3. 計算ロジック実装**
- 簡易版計算ロジック（令和2年以降の税制対応）
- 詳細版計算ロジック（全控除項目対応）
- 給与所得控除、所得税率、住民税計算

✅ **1-4. UI実装**
- 簡易版シミュレーターフォーム
- 詳細版シミュレーターフォーム（障害者控除、ひとり親控除など）
- 結果表示コンポーネント
- タブによる切り替えUI

✅ **1-5. 早見表機能**
- 早見表データ生成ロジック（89行×7列）
- 早見表UIコンポーネント
- 横スクロール対応

✅ **1-6. UIモダン化**
- グラデーション、アイコン、アニメーション
- モバイルファーストデザイン
- レスポンシブ対応（xl以上で2カラム）
- ダークモード対応

### 成果物
- ふるさと納税控除額シミュレーター（簡易版・詳細版）
- 控除上限額早見表
- モダンでモバイルフレンドリーなUI

### GitHubコミット
- 6件のコミット（b6c8b78 〜 54512d8）
- ブランチ: feature/setup-project

---

## Phase 2: MVP v1.0 - データベース・認証・基本管理機能 📋 **次フェーズ**

### 推定期間
2〜3週間

### 目標
ユーザー登録とデータの永続化により、寄付記録を管理できるようにする

### 2-1. データベース設計・セットアップ（3日）
- [ ] データベース選定（Supabase または Prisma + PostgreSQL）
- [ ] スキーマ設計
  - users（ユーザー情報）
  - donations（寄付記録）
  - municipalities（自治体マスター）
  - simulation_history（シミュレーション履歴）
  - favorites（お気に入り自治体）
- [ ] マイグレーション設定
- [ ] シードデータ作成（自治体マスター）

### 2-2. 認証機能実装（4日）
- [ ] NextAuth.js または Supabase Auth のセットアップ
- [ ] ログイン・ログアウト機能
- [ ] 新規登録機能
  - メール認証
  - パスワードリセット
- [ ] プロフィール編集機能
- [ ] セッション管理
- [ ] 認証状態によるUI分岐

### 2-3. 寄付記録管理機能（5日）
- [ ] 寄付記録の登録フォーム
  - 自治体選択
  - 寄付金額
  - 寄付日
  - 返礼品情報（オプション）
  - ワンストップ特例/確定申告フラグ
- [ ] 寄付記録一覧表示
  - リスト表示
  - カード表示
  - フィルタリング（年度、自治体、金額範囲）
  - ソート機能
- [ ] 寄付記録の編集・削除
- [ ] 年度別集計表示
  - 合計寄付額
  - 控除上限額との比較
  - 進捗率表示

### 2-4. シミュレーション履歴機能（2日）
- [ ] シミュレーション結果の保存
- [ ] 履歴一覧表示
- [ ] 履歴からの再読み込み
- [ ] 履歴の削除

### 成果物
- ユーザー認証システム
- 寄付記録のCRUD機能
- シミュレーション履歴管理
- データベースとの連携

---

## Phase 3: MVP v1.5 - 自治体検索・お気に入り機能 📋 **計画中**

### 推定期間
1〜2週間

### 目標
自治体情報の充実化と、ユーザーの利便性向上

### 3-1. 自治体マスターデータ整備（3日）
- [ ] 全国自治体データの収集・整備
  - 自治体名、都道府県、コード
  - 公式サイトURL
  - ふるさと納税ポータルリンク
- [ ] データベースへの投入
- [ ] 定期更新の仕組み検討

### 3-2. 自治体検索機能（3日）
- [ ] 検索UI実装
  - テキスト検索
  - 都道府県フィルター
  - 人気順・50音順ソート
- [ ] 検索結果表示
- [ ] ページネーション
- [ ] 自治体詳細ページ

### 3-3. お気に入り機能（2日）
- [ ] お気に入り登録・解除
- [ ] お気に入り一覧表示
- [ ] お気に入りからの寄付記録登録

### 3-4. ダッシュボード画面（3日）
- [ ] サマリー情報表示
  - 今年の寄付総額
  - 控除上限額
  - 残り枠
- [ ] 最近の寄付記録
- [ ] お気に入り自治体
- [ ] クイックアクション

### 成果物
- 自治体検索機能
- お気に入り管理
- ダッシュボード画面

---

## Phase 4: MVP v2.0 - 詳細分析・エクスポート機能 📋 **計画中**

### 推定期間
2週間

### 目標
データの可視化と外部出力により、ユーザー体験を向上

### 4-1. データ可視化（4日）
- [ ] グラフ・チャートライブラリ選定（Recharts / Chart.js）
- [ ] 寄付額の推移グラフ（月別・年別）
- [ ] 自治体別寄付割合（円グラフ）
- [ ] 控除上限額と実績の比較グラフ
- [ ] 年度比較グラフ

### 4-2. エクスポート機能（3日）
- [ ] CSV出力
  - 寄付記録のCSVダウンロード
  - 年度別サマリーCSV
- [ ] PDF出力
  - 寄付証明書まとめPDF
  - 確定申告用資料PDF
- [ ] 印刷最適化
  - 印刷用レイアウト
  - 改ページ調整

### 4-3. 詳細分析機能（3日）
- [ ] 年度別比較分析
- [ ] 控除効率分析
- [ ] 返礼品コスパ分析（オプション）
- [ ] カスタムレポート生成

### 4-4. 通知機能（2日）
- [ ] 寄付期限リマインダー
- [ ] 控除上限到達アラート
- [ ] ワンストップ特例申請期限通知

### 成果物
- データ可視化（グラフ・チャート）
- CSV/PDF出力機能
- 通知機能

---

## Phase 5: 追加機能・改善 📋 **検討中**

### 推定期間
継続的

### 候補機能

#### 5-1. 外部API連携
- [ ] ふるさとチョイスAPI連携
- [ ] 楽天ふるさと納税API連携
- [ ] さとふるAPI連携
- [ ] 返礼品情報の自動取得

#### 5-2. スマートフォンアプリ
- [ ] PWA対応
- [ ] プッシュ通知
- [ ] オフライン対応
- [ ] ホーム画面追加

#### 5-3. AI機能
- [ ] おすすめ自治体提案
- [ ] 返礼品レコメンド
- [ ] 寄付額最適化提案

#### 5-4. 共有機能
- [ ] 家族アカウント
- [ ] 寄付記録の共有
- [ ] SNS連携

#### 5-5. パフォーマンス最適化
- [ ] 画像最適化
- [ ] キャッシング戦略
- [ ] バンドルサイズ削減
- [ ] Lighthouse スコア改善

---

## デプロイ計画

### MVP v0.5（完了）
- **環境**: ローカル開発環境のみ
- **状態**: Phase 1完了

### MVP v1.0（✅ 本番デプロイ完了 - 2025-11-23）
- **デプロイ先**: Vercel
- **本番URL**: https://furusato-hub.com
- **環境**: 
  - Production（本番環境） ✅ 稼働中
  - Preview（プレビュー環境） ✅ 利用可能
- **データベース**: Supabase (本番環境)
- **DNS**: AWS Route53
- **ドメイン**: furusato-hub.com (カスタムドメイン)

### MVP v2.0（Phase 4完了後）
- **スケールアップ検討**
- **有料プラン移行検討**
- **パフォーマンス監視導入**

---

## 優先順位マトリクス

| Phase | 重要度 | 緊急度 | 難易度 | 期間 |
|-------|--------|--------|--------|------|
| Phase 1 | 高 | 高 | 中 | ✅ 完了 |
| Phase 2 | 高 | 高 | 高 | 2-3週間 |
| Phase 3 | 中 | 中 | 中 | 1-2週間 |
| Phase 4 | 中 | 低 | 中 | 2週間 |
| Phase 5 | 低 | 低 | 高 | 継続的 |

---

## リスクと対策

### 技術的リスク
- **データベース設計の複雑化**: 事前に十分なスキーマ設計レビュー
- **認証のセキュリティ**: 実績のあるライブラリ（NextAuth.js）使用
- **パフォーマンス問題**: 初期から最適化を意識、定期的な計測

### スケジュールリスク
- **機能追加による遅延**: MVPスコープを厳守、Phase分割で段階的リリース
- **学習コスト**: 新技術は事前に小規模検証

### ビジネスリスク
- **ユーザーニーズとのミスマッチ**: MVP早期リリースでフィードバック収集
- **競合サービスとの差別化**: シンプルさと使いやすさにフォーカス

---

## 次のアクション（Phase 2開始前）

### 準備タスク
1. [ ] データベース選定の最終決定（Supabase vs Prisma）
2. [ ] 認証方式の決定（NextAuth.js vs Supabase Auth）
3. [ ] スキーマ設計ドラフト作成
4. [ ] Phase 2の詳細タスク分解
5. [ ] 開発環境のセットアップ（データベース、認証）

### 検討事項
- マルチテナント対応の必要性
- データバックアップ戦略
- プライバシーポリシー・利用規約の準備
- GDPR/個人情報保護法対応

---

## 更新履歴
- 2025-11-23: 本番環境デプロイ完了を記録（https://furusato-hub.com）
- 2025-11-16: 初版作成、Phase 1完了を記録
